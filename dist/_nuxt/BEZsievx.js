import{q as G,s as W,ar as $,r as m,Y as F,as as w,o as r,e as y,w as e,b as s,I as J,f as K,g as Q,h as X,i as Z,j as oo,k as eo,l as so,m as to,af as no,ah as ao,ai as lo,a as n,c as f,at as io,au as ro,z as t,av as uo,C as co,d as x,N as v,aj as mo,D as fo,a7 as k,B as I,aw as h,t as _,_ as _o,p as go}from"./CLSunYti.js";const po={class:"flex justify-center items-center mb-4 mt-2 mx-4"},bo={key:0,to:"/"},wo={key:1,to:" /"},xo={class:"mb-4"},yo={class:"mb-4"},vo=["disabled"],ko=["disabled"],Io={class:"mt-4"},ho={key:2,class:"mt-4 text-red-500"},Lo={__name:"login",setup(Co){const p=G(),b=W(),{isLoggedIn:jo,logIn:Bo,logOut:So,checkUser:Uo}=$(),l=m(!1),u=m(""),c=m(""),d=m(!1),i=m(""),C=async()=>{l.value=!0,console.log("signUp function called"),i.value="";const{data:a,error:o}=await p.auth.signUp({email:u.value,password:c.value});console.log(a.user,o),o?i.value=o.message:a.user&&w("/login"),l.value=!1},j=async()=>{l.value=!0,console.log("login function called"),i.value="";const{data:a,error:o}=await p.auth.signInWithPassword({email:u.value,password:c.value});console.log(a.user,o),o?o.message==="Invalid login credentials"?i.value="Your email or password is incorrect. Please try again.":i.value=o.message:a.user&&await w("/"),l.value=!1},B=async()=>{console.log("logout function called");const{error:a}=await p.auth.signOut();console.log(b.value,a.value)};return F(()=>{b.value&&w("/")}),(a,o)=>{const S=X,U=Q,N=Z,L=K,T=J,V=lo,z=co,M=uo,D=ao,E=_o,P=mo,q=no,H=to,A=so,O=eo,R=oo,Y=go;return r(),y(Y,null,{default:e(()=>[s(T,{class:"ion-no-border border-b bg-white"},{default:e(()=>[s(L,null,{default:e(()=>[s(U,{slot:"start",class:"absolute"},{default:e(()=>[s(S,{defaultHref:"/"})]),_:1}),s(N,{class:"justify-center text-center"})]),_:1})]),_:1}),s(R,{class:"ion-padding"},{default:e(()=>[s(O,{class:"ion-justify-content-center"},{default:e(()=>[s(A,{class:"ion-justify-content-center"},{default:e(()=>[s(H,{"size-md":"8","size-lg":"6","size-xs":"12"},{default:e(()=>[s(q,{class:"max-w-lg mx-auto !border-2 !border-stone-950 bg-stone-100 p-4"},{default:e(()=>[s(D,{class:"text-center flex flex-col justify-between"},{default:e(()=>[s(V,{class:"flex flex-col justify-center"},{default:e(()=>[n("div",po,[a.isDarkMode?(r(),f("div",bo,o[4]||(o[4]=[n("img",{src:io,class:"max-w-xs w-full"},null,-1)]))):(r(),f("div",wo,o[5]||(o[5]=[n("img",{src:ro,class:"max-w-xs w-full"},null,-1)])))])]),_:1}),t(b)?(r(),y(M,{key:0,class:"w-full justify-end"},{default:e(()=>[s(z,{onClick:B,size:"small",fill:"clear"},{default:e(()=>o[6]||(o[6]=[x("Logout")])),_:1})]),_:1})):v("",!0)]),_:1}),s(P,null,{default:e(()=>[n("form",{onSubmit:o[3]||(o[3]=fo(()=>t(d)?C():j(),["prevent"])),class:"w-full max-w-lg mx-auto"},[n("div",xo,[o[7]||(o[7]=n("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),k(n("input",{type:"email",id:"email",placeholder:"Enter your email","onUpdate:modelValue":o[0]||(o[0]=g=>I(u)?u.value=g:null),required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[h,t(u)]])]),n("div",yo,[o[8]||(o[8]=n("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),k(n("input",{type:"password",id:"password",placeholder:"Enter your password","onUpdate:modelValue":o[1]||(o[1]=g=>I(c)?c.value=g:null),required:"",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[h,t(c)]])]),t(d)?(r(),f("button",{key:1,type:"submit",disabled:t(l),class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-300"},_(t(l)?"Loading...":"sign up"),9,ko)):(r(),f("button",{key:0,type:"submit",disabled:t(l),class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-300"},_(t(l)?"Loading...":"login"),9,vo)),n("div",Io,[x(_(t(d)?"Already have an account?":"Need an account?")+" ",1),s(E,{onClick:o[2]||(o[2]=g=>d.value=!t(d)),to:"/login",class:"text-indigo-600"},{default:e(()=>[x(_(t(d)?"Login":"Sign up"),1)]),_:1})]),t(i)?(r(),f("div",ho,_(t(i)),1)):v("",!0)],32)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{Lo as default};
