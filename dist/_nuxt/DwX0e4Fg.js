import{q as S,r as v,s as k,v as U,o as V,c as j,b as e,w as t,x as z,d as m,y as A,z as r,A as D,B,C as O,t as T,D as h,e as q,I as E,f as H,g as L,h as N,i as P,j as R,k as G,l as M,m as W,p as $}from"./_zzroedJ.js";import{_ as F}from"./DlAUqK2U.js";const J={__name:"Account",async setup(C){let c,p;const _=S(),o=v(!0),s=v(""),l=v(""),b=v("");o.value=!0;const d=k(),{data:u}=([c,p]=U(()=>_.from("profiles").select("username, website, avatar_url").eq("id",d.value.id).single()),c=await c,p(),c);u&&(s.value=u.username,l.value=u.website,b.value=u.avatar_url),o.value=!1;async function w(){try{o.value=!0;const n={id:k().value.id,username:s.value,website:l.value,avatar_url:b.value,updated_at:new Date},{error:i}=await _.from("profiles").upsert(n,{returning:"minimal"});if(i)throw i}catch(a){alert(a.message)}finally{o.value=!1}}async function g(){try{o.value=!0;const{error:a}=await _.auth.signOut();if(a)throw a;d.value=null}catch(a){alert(a.message)}finally{o.value=!1}}return(a,n)=>{const i=z,y=A,f=D,x=O;return V(),j("form",{class:"form-widget",onSubmit:h(w,["prevent"])},[e(f,null,{default:t(()=>[e(i,{position:"stacked",for:"email"},{default:t(()=>n[2]||(n[2]=[m("Email")])),_:1}),e(y,{id:"email",type:"text",value:r(d).email,readonly:"",fill:"solid"},null,8,["value"])]),_:1}),e(f,null,{default:t(()=>[e(i,{position:"stacked",for:"username"},{default:t(()=>n[3]||(n[3]=[m("Username")])),_:1}),e(y,{id:"username",type:"text",modelValue:r(s),"onUpdate:modelValue":n[0]||(n[0]=I=>B(s)?s.value=I:null),fill:"solid"},null,8,["modelValue"])]),_:1}),e(f,null,{default:t(()=>[e(i,{position:"stacked",for:"website"},{default:t(()=>n[4]||(n[4]=[m("Website")])),_:1}),e(y,{id:"website",type:"url",modelValue:r(l),"onUpdate:modelValue":n[1]||(n[1]=I=>B(l)?l.value=I:null),fill:"outline"},null,8,["modelValue"])]),_:1}),e(f,{lines:"none"},{default:t(()=>[e(x,{type:"submit",expand:"block",disabled:r(o)},{default:t(()=>[m(T(r(o)?"Loading ...":"Update"),1)]),_:1},8,["disabled"])]),_:1}),e(f,{lines:"none"},{default:t(()=>[e(x,{expand:"block",onClick:g,disabled:r(o)},{default:t(()=>n[5]||(n[5]=[m("Sign Out")])),_:1},8,["disabled"])]),_:1})],32)}}},K={};function Q(C,c){const p=N,_=L,o=P,s=H,l=E,b=J,d=W,u=M,w=G,g=R,a=$;return V(),q(a,null,{default:t(()=>[e(l,{class:"ion-no-border border-b bg-white"},{default:t(()=>[e(s,null,{default:t(()=>[e(_,{slot:"start",class:"absolute"},{default:t(()=>[e(p,{defaultHref:"/"})]),_:1}),e(o,{class:"justify-center text-center"})]),_:1})]),_:1}),e(g,{class:"ion-padding"},{default:t(()=>[e(w,{class:"ion-justify-content-center"},{default:t(()=>[e(u,{class:"ion-justify-content-center"},{default:t(()=>[e(d,{"size-md":"8","size-lg":"6","size-xs":"12"},{default:t(()=>[e(b)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Z=F(K,[["render",Q]]);export{Z as default};
